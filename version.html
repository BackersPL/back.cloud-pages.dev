<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Edytor plugin√≥w</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg,#f9f9f9 0%,#eef7fa 100%); margin:0; padding:0; min-height:100vh; }
        header { background:#fff; color:#333; padding:2rem 0 1rem 0; text-align:center; font-size:2rem; font-weight:500; box-shadow:0 4px 16px rgba(44,140,240,0.08); }
        .container { max-width:800px; margin:2rem auto; background:#fff; border-radius:10px; box-shadow:0 4px 16px rgba(44,140,240,0.08); padding:2rem; }
        h2 { color:#2d8cf0; margin-bottom:1rem; }
        table { width:100%; border-collapse:collapse; margin-bottom:1.5rem; }
        th, td { border-bottom:1px solid #f0f0f0; padding:0.8rem; text-align:left; }
        th { background:#f7faff; color:#2d8cf0; font-weight:600; }
        tr:hover { background:#f9fcff; }
        input { padding:0.5rem; width:100%; border:1px solid #ddd; border-radius:5px; }
        button { background:#2d8cf0; color:white; border:none; padding:0.6rem 1.2rem; border-radius:5px; cursor:pointer; font-size:0.95rem; }
        button:hover { background:#1d7cd6; }
        .actions { display:flex; gap:0.5rem; }
        .save-box { text-align:right; margin-top:1rem; }
    </style>
</head>
<body>
    <header>Edytor plugins.json</header>
    <div class="container">
        <h2>Lista plugin√≥w</h2>
        <table id="plugin-table">
            <thead>
                <tr>
                    <th>Nazwa</th>
                    <th>Wersja</th>
                    <th>URL</th>
                    <th>Akcje</th>
                </tr>
            </thead>
            <tbody id="plugin-body"></tbody>
        </table>
        <button onclick="addRow()">‚ûï Dodaj plugin</button>
        <div class="save-box">
            <button onclick="downloadJSON()">üíæ Pobierz plugins.json</button>
        </div>
    </div>

    <script>
        let plugins = [];

        async function loadPlugins() {
            try {
                const res = await fetch("plugins.json");
                plugins = await res.json();
                renderTable();
            } catch (e) {
                alert("B≈ÇƒÖd przy ≈Çadowaniu plugins.json");
            }
        }

        function renderTable() {
            const body = document.getElementById("plugin-body");
            body.innerHTML = "";
            plugins.forEach((plugin, index) => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td><input value="${plugin.name}" onchange="updatePlugin(${index}, 'name', this.value)"></td>
                    <td><input value="${plugin.version}" onchange="updatePlugin(${index}, 'version', this.value)"></td>
                    <td><input value="${plugin.url}" onchange="updatePlugin(${index}, 'url', this.value)"></td>
                    <td class="actions">
                        <button onclick="deleteRow(${index})">üóëÔ∏è Usu≈Ñ</button>
                    </td>
                `;
                body.appendChild(tr);
            });
        }

        function updatePlugin(index, field, value) {
            plugins[index][field] = value;
        }

        function addRow() {
            plugins.push({ name: "Nowy plugin", version: "1.0", url: "http://link" });
            renderTable();
        }

        function deleteRow(index) {
            plugins.splice(index, 1);
            renderTable();
        }

        function downloadJSON() {
            const blob = new Blob([JSON.stringify(plugins, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "plugins.json";
            a.click();
            URL.revokeObjectURL(url);
        }

        loadPlugins();
    </script>
</body>
</html>
